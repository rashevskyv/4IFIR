# Установка 
Часть информации взята с сайта https://customfw.xyz/ (из России с VPN) - если вы только стали пользователем Nintendo Switch - тут есть ответы на многие ваши вопросы 

**ВАЖНО! Строго следуйте инструкции и не отклоняйтесь от нее. В случае возникновения проблем, вернитесь к инструкции и переустановите чифир начисто.**

1. [Установка 4IFIR на чистую SD](#установка-4IFIR-на-чистую-SD)   
1. [Установка (с кефира или другой сборки)](#Установка-с-кефира-или-другой-сборки)  
1. [Обновление (переход с предыдущих версий)](#Обновление-переход-с-предыдущих-версий)
2. [Возможные проблемы](#Возможные-проблемы)  

# Установка 4IFIR на чистую SD

### Подготовка Micro-SD
1. Распакуйте [4IFIR](https://sintez.io/4IFIR.zip) на карту памяти консоли
1. Удерживайте (VOL-) на приставке во время появления бутлого, чтобы попасть в hekate
1. Перейдите в Tools -> Partition SD card, нажмите OK, Next Step -> Start
1. Ваша карта будет отформатирована специальным образом в FAT32, чтобы дать прирост в скорости на 15%-30%  
>[Альтернативный метод c помощью Rufus](https://customfw.xyz/format_sd) (из России с VPN)

### Создание EmuNand
При использовании 4IFIR - создание EmuNand необходимо в целях безопасности. Во время разгона случаются системные сбои, а восстановить эмунанд гораздо проще и быстрее. Так же использование EmuNand помогает избежать бана консоли. [Стоит ознакомиться](https://switchpirate.chan.uz/?p=emunand) - максимально подробно про EmuNanD (из России с VPN)
1. Включите консоль, удерживая кнопку понижения громкости, чтобы загрузиться в hekate
1. Перейдите в “emuMMC”
1. Нажмите “Create emuMMC” -> “SD File”
1. Для создания emuMMC нужно иметь не менее 32Гб свободного места на карте, или 64Гб в случае если у вас OLED! Если у вас нет столько, возьмите другую карту, либо удалите часть игр с консоли, загрузившись в сток
1. После окончания создания emuMMC, нажмите “ОК”
1. Теперь при запуске приставки она автоматически будет запускать emuMMC с установленным 4IFIR.
1. Чтобы попасть в официальную прошивку, запустите hekate -> reboot -> OFW

>Существует возможность создать EmuNAND на скрытом разделе, это позволяет самому установить размер раздела, который займет EmuNand (10Гб будет достаточно)
[Инструкция с 4PDA](https://4pda.to/forum/index.php?showtopic=900987&view=findpost&p=103853258)

# Установка (с кефира или другой сборки)
**ВАЖНО - перед установкой убедитесь, что у вас установлен EmuNAND:**  
>("Системные настройки" далее "Система" в строке "Текущая версия системы" в конце должна быть буква "E") 
   
**Если - Нет, то рекомендуется его установить с предварительным [форматирование карты памяти](#Подготовка-Micro-SD) (все данные с карты будут стерты)**

### Отладочная установка (Требуется ПК)   
>Рекомендуемый метод, т.к. позволяет избежать большинства проблем при переходе с других проектов из-за конфликта компонентов  
1. Удалите с карты памяти всё, кроме папки Nintendo и emummc (если есть) (Папку с бекапами сохранений, например JKSV, тоже не стоит удалять)
   * Карта должна быть в [FAT32](https://format.customfw.xyz)
   * Работать с картой памяти рекомендуется через картридер, не через консоль.
2. Распакуйте [4IFIR](https://sintez.io/4IFIR.zip) на карту памяти консоли
   * Некоторые провайдеры в Украине блокируют `sintez.io`, можно использовать [альтернативную ссылку на 4IFIR с github](https://github.com/rashevskyv/4ifir-checker/raw/main/github/4IFIR.zip). *Также подходит в случае падения сервера `sintez.io`*.
3. Вставить карту в консоль и включить

### All in One Updater (Если нет ПК)  
>Могут остаться следы предыдущих сборок (Kefir updater и т. п.)  
1. Распакуйте [All in One Updater с конфигом 4IFIR'а](https://sintez.io/AIO.zip) на карту памяти консоли
   * Некоторые провайдеры в Украине блокируют `sintez.io`, можно использовать [альтернативную ссылку на All in One Updater с конфигом 4IFIR'а с github](https://github.com/rashevskyv/4ifir-checker/raw/main/github/AIO.zip). *Также подходит в случае падения сервера `sintez.io`*.
1. Запустите [**Homebrew Launcher**](https://switch.customfw.xyz/hbl) > **All in One Updater**
   * Если вместо запуска приложения вы получаете черный экран, перекачайте приложение вручную из его [репозитория](https://github.com/HamletDuFromage/aio-switch-updater) и вручную пропишите в Custom downloads > Add custom link этот адрес `https://sintez.io/AIO.zip`, после чего перезапустите приложение
1. Перейдите в **Custom Downloads** > **4IFIR 2.3 Miracle** > **Continue**, на запрос о перезаписи `ini`, выберите **Yes**, на запрос о переустановке hekate выберите **No**, консоль перезагрузится



# Обновление (переход с предыдущих версий) 

1. Запустите [**Homebrew Launcher**](https://switch.customfw.xyz/hbl) > **All in One Updater**
   * Если вместо запуска приложения вы получаете черный экран, перекачайте приложение вручную из его [репозитория](https://github.com/HamletDuFromage/aio-switch-updater) и вручную пропишите в Custom downloads > Add custom link этот адрес `https://sintez.io/AIO.zip`, после чего перезапустите приложение
1. Перейдите в **Custom Downloads** > **Refresh** > **Continue**, на запрос о перезаписи `ini`, выберите **Yes**
1. Перейдите в **Custom Downloads** > **4IFIR 2.3 Miracle** > **Continue**, на запрос о перезаписи `ini`, выберите **Yes**, на запрос о переустановке hekate выберите **No**, консоль перезагрузится

# Возможные проблемы 

1. Черный экран после лого Nintendo:  
   >Скачайте [KipTool](https://github.com/kawaii-flesh/KipTool/releases/)  
   >Закиньте файл kiptool.bin в директорию bootloader/payloads  
   >Далее Hekate > payloads > kiptool.bin.  
   >Далее Kip Wizard - CPU - speedshift поставьте **25 или 100** вместо нуля и не забудьте apply changes.  
   >Перезагрузите консоль  
   >Это может починить запуск в атмосферу    
